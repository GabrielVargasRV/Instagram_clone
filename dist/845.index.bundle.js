(self.webpackChunkwhatsappv2=self.webpackChunkwhatsappv2||[]).push([[845],{9661:(e,r,n)=>{"use strict";n.d(r,{Z:()=>s});var t=n(3645),a=n.n(t)()((function(e){return e[1]}));a.push([e.id,"\r\n.Inbox {\r\n    width: 935px;\r\n    height: 85vh;\r\n    display: grid;\r\n    grid-template-columns: 350px auto;\r\n    margin: 0 auto;\r\n    margin-top: 10px;\r\n    background-color: #fff;\r\n    border: 1px solid #e5e5e5;\r\n    border-radius: 4px;\r\n  }\r\n  .Inbox .chats {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: grid;\r\n    grid-template-rows: 10vh 75vh;\r\n    border-right: 1px solid #e5e5e5;\r\n  }\r\n  .Inbox .chats .chats-header {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-bottom: 1px solid #e5e5e5;\r\n  }\r\n  .Inbox .chats .chats-header p {\r\n    font-size: 18px;\r\n  }\r\n  .Inbox .chats .chats-header button {\r\n    border-style: none;\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n  }\r\n  .chats-container{\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow-x: scroll;\r\n  }\r\n  .chats-container .chats-item {\r\n    width: 100%;\r\n    height: 60px;\r\n    display: grid;\r\n    grid-template-columns: 18% 82%;\r\n    padding: 0px 10px;\r\n    margin-top: 4px;\r\n    color: black;\r\n  }\r\n  .chats-container .chats-item div {\r\n    padding: 10px 0px 10px 10px;\r\n  }\r\n  .chats .chats-item:hover {\r\n    background-color: #fafafa;\r\n  }\r\n  .chats-container .chats-item img {\r\n    width: 60px;\r\n    height: 60px;\r\n    border-radius: 50%;\r\n  }\r\n  \r\n\r\n  \r\n.chat {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: grid;\r\n    grid-template-rows: 10vh 75vh;\r\n  }\r\n  .chat .chat-header {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 10px;\r\n    border-bottom: 1px solid #e5e5e5;\r\n  }\r\n  .chat .chat-header img {\r\n    width: 40px;\r\n    height: 40px;\r\n    border-radius: 50%;\r\n    margin-right: 5px;\r\n  }\r\n  .chat .chat-body {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: grid;\r\n    grid-template-rows: 67.5vh 7.5vh;\r\n  }\r\n  .chat .chat-body .messege-form {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 10px;\r\n  }\r\n  .chat .chat-body .messeges-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0 10px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow-x: auto;\r\n  }\r\n  .chat-body .messeges-container .my-msg {\r\n    display: inline-block;\r\n    max-width: 50%;\r\n    height: auto;\r\n    border-radius: 15px;\r\n    word-wrap: break-word;\r\n    background-color: #e5e5e5;\r\n    margin-left: auto;\r\n    margin-top: 5px;\r\n    padding: 7px;\r\n  }\r\n  .chat-body .messeges-container .msg {\r\n    display: inline-block;\r\n    max-width: 50%;\r\n    height: auto;\r\n    border-radius: 15px;\r\n    word-wrap: break-word;\r\n    background-color: #fff;\r\n    border: 1px solid #e5e5e5;\r\n    margin-right: auto;\r\n    margin-top: 5px;\r\n    padding: 7px;\r\n  }\r\n  .chat-body .messege-form form {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: grid;\r\n    grid-template-columns: 80% 20%;\r\n    border: 1px solid #e5e5e5;\r\n    border-radius: 20px;\r\n  }\r\n  .chat-body .messege-form form textarea {\r\n    border-style: none;\r\n    background-color: transparent;\r\n    outline: none;\r\n    resize: none;\r\n    padding: 7px;\r\n  }\r\n  .chat-body .messege-form form textarea::placeholder {\r\n    color: #e5e5e5;\r\n  }\r\n  .chat-body .messege-form form button {\r\n    border-style: none;\r\n    background-color: transparent;\r\n    color: #0095f6;\r\n    outline: none;\r\n    cursor: pointer;\r\n  }",""]);const s=a},6845:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>u});var t=n(7294),a=n(4494),s=n(4593),o=n(3727),c=n(5977),l=n(2051),i=n(8033),d=n(3379),h=n.n(d),m=n(9661),p={insert:"head",singleton:!1};h()(m.Z,p);m.Z.locals;const u=(0,a.$j)((e=>({userData:e.userData})),(e=>({})))((({userData:e})=>{const{id:r}=(0,c.UO)(),n=(0,t.useRef)(null),[a,d]=(0,t.useState)([]),[h,m]=(0,t.useState)(null),[p,u]=(0,t.useState)([]),[g,b]=(0,t.useState)(""),[x,f]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{r&&(async()=>{(await l.db.collection("chats").doc(r).get()).data().users.forEach((r=>{r.username!==e.username&&m(r)})),await l.db.collection("chats").doc(r).collection("messeges").orderBy("createdAt","asc").onSnapshot((e=>{const r=[];e.docs.forEach((e=>{r.push({id:e.id,...e.data()})})),u(r),n.current&&n.current.scrollIntoView({behavior:"smooth"})}))})(),(async()=>{await l.db.collection("chats").where("usersname","array-contains",e.username).orderBy("lastMsgDate","desc").onSnapshot((r=>{const t=[];r.docs.forEach((r=>{r.data().users.forEach((n=>{n.username!==e.username&&t.push({...r.data(),id:r.id,profilePhoto:n.photoURL,username:n.username})}))})),d(t),n.current&&n.current.scrollIntoView({behavior:"smooth"}),f(!1)}))})()}),[r]),x?t.createElement(i.Z,null):t.createElement("div",{className:"Inbox"},t.createElement(s.q,null,t.createElement("title",null,"Instagram - Inbox")),t.createElement("div",{className:"chats"},t.createElement("div",{className:"chats-header"},t.createElement("p",null,e.username),t.createElement("button",null,t.createElement("i",{className:"fas fa-chevron-down"}))),t.createElement("div",{className:"chats-container"},a.length?t.createElement("div",null,a.map((e=>t.createElement(o.rU,{to:`/inbox/${e.id}`,className:"chats-item link"},t.createElement("img",{src:e.profilePhoto,alt:""}),t.createElement("div",null,t.createElement("p",null,e.username),t.createElement("p",{style:{opacity:"60%"}},e.lastMsg?e.lastMsg.text.length>25?`${e.lastMsg.text.substr(0,25)}...`:e.lastMsg.text:"")))))):t.createElement("div",null))),t.createElement("div",null,r?h?t.createElement("div",{className:"chat"},t.createElement("div",{className:"chat-header"},t.createElement("img",{src:h.photoURL,alt:""}),t.createElement("p",null,h.username)),t.createElement("div",{className:"chat-body"},t.createElement("div",{className:"messeges-container"},p.map((r=>t.createElement("p",{className:r.username===e.username?"my-msg":"msg"},r.text))),t.createElement("div",{ref:n})),t.createElement("div",{className:"messege-form"},t.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),g.length){const t=Date.now(),a={text:g,createdAt:t,username:e.username};await l.db.collection("chats").doc(r).collection("messeges").add(a),b(""),await l.db.collection("chats").doc(r).update({lastMsg:a,lastMsgDate:t}),n.current.scrollIntoView({behavior:"smooth"})}}},t.createElement("textarea",{name:"",placeholder:"Messege...",value:g,onChange:e=>b(e.target.value)}),t.createElement("button",{type:"submit"},"Send"))))):t.createElement("div",null,"loading..."):t.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},t.createElement("i",{className:"fas fa-paper-plane",style:{transform:"scale(3)",margin:"20px"}}),t.createElement("p",{style:{fontSize:"24px",fontWeight:100}},"Your Messeges"))))}))}}]);