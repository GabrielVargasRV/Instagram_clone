(self.webpackChunkwhatsappv2=self.webpackChunkwhatsappv2||[]).push([[362],{4990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(4699),a=n(7294),l=n(3727);const c=function(e){var t=e.postModalInfo,n=e.userData,c=e.addLike,o=e.disLike,s=e.addComment,u=(0,a.useState)(!1),i=(0,r.Z)(u,2),m=i[0],d=i[1],f=(0,a.useState)(""),p=(0,r.Z)(f,2),E=p[0],h=p[1],v=function(){if(m){d(!1);var e=t,r=e.likes.indexOf(n.username);e.likes.splice(r,1),setPost(e),o(t.id)}else{d(!0);var a=post;a.likes.push(username),setPost(a),c(t.id)}};return(0,a.useEffect)((function(){t.likes.includes(n.username)&&d(!0)}),[]),a.createElement("div",{className:"post-modal"},a.createElement("div",{className:"photo",style:{backgroundImage:"url(".concat(t.photo,")")}}),a.createElement("div",{className:"post-modal-rigth"},a.createElement("div",{className:"post-modal-header"},a.createElement("img",{src:t.userPhoto,alt:""}),a.createElement(l.rU,{to:"profile/".concat(t.username),className:"link"},t.username)),a.createElement("div",{className:"post-modal-comments"},t.comments.map((function(e){return a.createElement("div",{key:e.id},a.createElement("img",{src:e.userPhoto,alt:""}),a.createElement("p",null,a.createElement("strong",null,a.createElement(l.rU,{className:"link",to:"profile/".concat(e.username)},e.username),"  "),e.text))}))),a.createElement("div",{className:"post-modal-addcomment"},a.createElement("div",null,m?a.createElement("i",{onClick:v,className:"fas fa-heart"}):a.createElement("i",{onClick:v,className:"far fa-heart"}),a.createElement("i",{className:"far fa-comment"})),a.createElement("p",null,a.createElement("strong",null,t.likes.length," likes")),a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.comments.push({id:1,text:E,userPhoto:n.photoURL,username:n.username}),s(t.id,E),h("")}},a.createElement("textarea",{cols:"30",value:E,onChange:function(e){return h(e.target.value)},placeholder:"Add a comment"}),a.createElement("button",{type:"submit"},"Post")))))}},8362:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(2137),a=n(4699),l=n(7757),c=n.n(l),o=n(7294),s=n(5977),u=n(4593),i=n(4494),m=n(96),d=n(6156),f=n(2051);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h=function(e){var t=e.postInfo,n=e.handlePostModal,l=(0,o.useState)(null),s=(0,a.Z)(l,2),u=s[0],i=s[1],m=function(){var e=(0,r.Z)(c().mark((function e(){var n,r,a,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.db.collection("posts").doc(t.id).collection("likes").get();case 2:return n=e.sent,r=[],n.docs&&n.docs.forEach((function(e){r.push(e.id)})),e.next=7,f.db.collection("posts").doc(t.id).collection("comments").get();case 7:a=e.sent,l=[],a.docs&&a.docs.forEach((function(e){l.push(E({id:e.id},e.data()))})),i(E(E({},t),{},{likes:r,comments:l}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){m()}),[]),u?o.createElement("button",{onClick:function(){return n(u)},className:"Profile-post",style:{backgroundImage:"url(".concat(u.photo,")")}},o.createElement("div",{className:"content"},o.createElement("div",null,o.createElement("i",{className:"fas fa-heart"}),o.createElement("p",null,u.likes.length)),o.createElement("div",null,o.createElement("i",{class:"fas fa-comment"}),o.createElement("p",null,u.comments.length)))):o.createElement("div",{class:"lds-spinner"},o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null),o.createElement("div",null))};var v=n(4990),g=n(5072);const k=(0,i.$j)((function(e){return{userData:e.userData}}),(function(e){return{}}))((function(e){var t=e.userData,n=(0,s.UO)().username,l=(0,s.k6)(),i=(0,o.useState)(null),d=(0,a.Z)(i,2),f=d[0],p=d[1],E=(0,o.useState)(!0),k=(0,a.Z)(E,2),b=k[0],w=k[1],y=(0,o.useState)(!1),x=(0,a.Z)(y,2),P=x[0],N=x[1],Z=(0,o.useState)(!0),O=(0,a.Z)(Z,2),C=O[0],j=O[1],S=(0,o.useState)(null),D=(0,a.Z)(S,2),I=D[0],L=D[1],U=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.ZN)(n,t);case 2:N(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.IJ)(f.uid,n,t.uid,t.username);case 2:N(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,g.P4)(f,t).then((function(e){l.push("/inbox/".concat(e))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,r.Z)(c().mark((function e(n){var r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db.collection("posts").doc(n).collection("likes").get();case 2:if(r=e.sent,a=[],r.forEach((function(e){a.push(e.id)})),a.includes(t.username)){e.next=8;break}return e.next=8,db.collection("posts").doc(n).collection("likes").doc(t.username).set({username:t.username});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db.collection("posts").doc(n).collection("likes").doc(t.username).delete();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)(c().mark((function e(n,r){var a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={text:r,username:t.username,userPhoto:t.photoURL},e.next=3,db.collection("posts").doc(n).collection("comments").add(a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(e){j(!C),L(e);var t=document.getElementById("post-modal");t.style.display=C?"block":"none"};return(0,o.useEffect)((function(){(0,g.Ai)(n,t.username).then((function(e){p(e),e.followers.forEach((function(e){e.username===t.username&&N(!0)})),w(!1)}))}),[]),b&&m.Z,o.createElement(o.Fragment,null,o.createElement(u.q,null,o.createElement("title",null,"Instagram - ",n)),o.createElement("div",{id:"post-modal",className:"post-modal-container"},o.createElement("button",{onClick:function(){return q(null)},className:"close-btn"},o.createElement("i",{class:"fas fa-times"})),I?o.createElement(v.Z,{postModalInfo:I,userData:t,addLike:A,disLike:F,addComment:_}):o.createElement("p",null,"Loading...")),f?o.createElement("div",{className:"Profile"},o.createElement("div",{className:"Profile-header"},o.createElement("div",{className:"Profile-header_left"},o.createElement("img",{src:f.photoURL,alt:""})),o.createElement("div",{className:"Profile-header_right"},o.createElement("div",null,o.createElement("h2",null,f.username),n!==t.username&&o.createElement("div",null,o.createElement("button",{onClick:R},"Messege"),P?o.createElement("button",{onClick:M},"Unfollow"):o.createElement("button",{onClick:U,style:{backgroundColor:"#0095f6",color:"white"}},"Follow"))),o.createElement("div",null,o.createElement("p",null,o.createElement("strong",null,f.posts.length)," posts"),o.createElement("p",null,o.createElement("strong",null,f.followers.length)," followers"),o.createElement("p",null,o.createElement("strong",null,f.following.length)," following")),o.createElement("div",null,o.createElement("p",null,f.bio)))),f.posts.length?o.createElement("div",{className:"Profile-posts"},f.posts.map((function(e){return o.createElement(h,{postInfo:e,handlePostModal:q})}))):o.createElement("div",{style:{height:"50vh",display:"grid",placeItems:"center",marginTop:"10px",borderRadius:"4px",backgroundColor:"#fff"}},o.createElement("h2",null,"Start capturing and sharing your moments."))):o.createElement(m.Z,null))}))}}]);